var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},map;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.checkIsOnRoad=function(e){return!0},Object.defineProperty(i.prototype,"foodPoint",{get:function(){return new egret.Point(e.GridConst.GRId_SIZE/2,e.GridConst.GRId_SIZE/2)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"info",{get:function(){return this._info},set:function(t){this._info=t,this.x=t.xIndex*e.GridConst.GRId_SIZE,this.y=t.yIndex*e.GridConst.GRId_SIZE,this.setGridSkin();var i=utils.DisplayObjectUtil.createBitmapByName("arrow_1_png");if(this.addChild(i),this.info.isShowArrow){var i=utils.DisplayObjectUtil.createBitmapByName("arrow_"+t.nextNode.dir+"_png");this.addChild(i)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"prevGrid",{get:function(){return this._prevGrid},set:function(e){this._prevGrid=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nextGrid",{get:function(){return this._nextGrid},set:function(e){this._nextGrid=e},enumerable:!0,configurable:!0}),i.prototype.setGridSkin=function(){var t=this.getGridColor();this.graphics.beginFill(t),this.graphics.drawRect(0,0,e.GridConst.GRId_SIZE,e.GridConst.GRId_SIZE),this.graphics.endFill()},i.prototype.getGridColor=function(){var e=16777215;return 2==this._info.mapLevel?e=16776960:3==this._info.mapLevel?e=16711680:4==this._info.mapLevel&&(e=16711935),e},i.prototype.isOnGrid=function(e){return!0},i}(egret.Sprite);e.BaseGrid=t,__reflect(t.prototype,"map.BaseGrid")}(map||(map={}));var Camera=function(){function e(){}return e.setup=function(e){this._map=e},Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.follow=function(e){null!=e&&(null!=this.target&&this.target.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.target=e,this.target.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this))},e.onEnterFrame=function(){return null==this._map?void console.error("map is null"):(this._map.x=StageManager.stageWidth/2-this.target.x,void(this._map.y=StageManager.stageHeight/2-this.target.y))},e}();__reflect(Camera.prototype,"Camera");var Main=function(e){function t(){var i=e.call(this)||this;return i.runTime=0,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),t.instance=i,i}return __extends(t,e),t.prototype.onAddToStage=function(e){StageManager.setup(this.stage),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.createGameScene=function(){var e=this.stage.stageWidth/640,t=this.stage.stageHeight/1136,i=Math.min(e,t);this.container=new egret.Sprite,this.container.width=640,this.container.height=1136,this.container.scaleX=this.container.scaleY=i,this.stage.addChild(this.container),this.container.anchorOffsetX=320,this.container.anchorOffsetY=568,this.container.x=this.stage.stageWidth/2,this.container.y=this.stage.stageHeight/2,this.gameScene=new ui.GameScene,this.container.addChild(this.gameScene),this.mainMenu=new ui.MainMenu,this.container.addChild(this.mainMenu),RES.getResAsync("description_json",this.startAnimation,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnter,this)},t.prototype.onEnter=function(){this.gameScene.update(egret.getTimer()-this.runTime),this.runTime=egret.getTimer()},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){},t.prototype.startGame=function(){egret.Tween.get(this.mainMenu).to({alpha:0},200).call(this.runGameScene,this)},t.prototype.runGameScene=function(){utils.DisplayObjectUtil.removeFromParent(this.mainMenu),this.gameScene.start()},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var StageManager=function(){function e(){}return e.setup=function(e){this._stage=e},Object.defineProperty(e,"stageWidth",{get:function(){return this._stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageHeight",{get:function(){return this._stage.stageHeight},enumerable:!0,configurable:!0}),e}();__reflect(StageManager.prototype,"StageManager");var tui;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i._bmp=t,i.touchEnabled=!0,i._bmp.anchorOffsetX=i._bmp.width/2,i._bmp.anchorOffsetY=i._bmp.height/2,i.addChild(i._bmp),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.pressHandler,i),i.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,i.upHandler,i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,i.clickHandler,i),i}return __extends(t,e),t.prototype.pressHandler=function(e){egret.Tween.get(this._bmp).to({scaleX:.9,scaleY:.9},100),null!=this._pressFun&&this._pressFun()},t.prototype.clickHandler=function(e){egret.Tween.get(this._bmp).to({scaleX:1,scaleY:1},100),null!=this._clickFun&&this._clickFun()},t.prototype.upHandler=function(e){egret.Tween.get(this._bmp).to({scaleX:1,scaleY:1},100)},t.prototype.dispose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.pressHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.upHandler,this)},t}(egret.DisplayObjectContainer);e.Button=t,__reflect(t.prototype,"tui.Button")}(tui||(tui={}));var events;!function(e){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(egret.Event);t.RESTART_GAME="restartGame",e.GameEvent=t,__reflect(t.prototype,"events.GameEvent")}(events||(events={}));var map;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.DICT_KEY="level_",e.reset(),e}return __extends(i,t),i.prototype.reset=function(){this._mapLevel=1,this.mapDict=new utils.Dictionary,this.allGridDict=new utils.Dictionary,null!=this.mapLayer&&this.mapLayer.removeChildren(),null!=this.playerLayer&&this.playerLayer.removeChildren(),this.mapLayer=new egret.Sprite,this.playerLayer=new egret.Sprite,this.mapLayer.cacheAsBitmap=!1,this.addChild(this.mapLayer),this.addChild(this.playerLayer),this.createMap(this.mapLevel);var e=this.mapDict[this.DICT_KEY+this.mapLevel];this.createMap(this._mapLevel+1,e[e.length-1].info),this.mapLayer.cacheAsBitmap=!0},i.prototype.addPlayer=function(e){e.pos=this.playerStartPoint,this.player=e,this.playerLayer.addChild(e)},Object.defineProperty(i.prototype,"mapLevel",{get:function(){return this._mapLevel},set:function(e){if(e>this._mapLevel){this.mapLayer.cacheAsBitmap=!1,this._mapLevel-1>0&&this.removeOldMap(this._mapLevel-1),this._mapLevel=e;var t=this.mapDict[this.DICT_KEY+this.mapLevel];this.createMap(this._mapLevel+1,t[t.length-1].info),this.mapLayer.cacheAsBitmap=!0}},enumerable:!0,configurable:!0}),i.prototype.createMap=function(t,i){void 0===i&&(i=null);var r=null,n=new Array;this.mapDict.add(this.DICT_KEY+t,n);for(var a=e.MapFactory.createMapData(t,i),s=0;s<a.length;s++){var i=a[s],o=e.MapFactory.getGridByType(i.type);o.info=i,o.prevGrid=r,null!=r&&(r.nextGrid=o),r=o,0==s&&1==t&&(this.playerStartPoint=new egret.Point(o.x+i.centerPoint.x,o.y+i.centerPoint.y)),this.mapLayer.addChild(o),n.push(o),this.allGridDict.add(i.xIndex+"_"+i.yIndex,o)}},i.prototype.isOnMap=function(e,t){return null!=this.getCurrentGrid(e,t)},i.prototype.getCurrentGrid=function(t,i){var r=Math.floor(t/e.GridConst.GRId_SIZE),n=Math.floor(i/e.GridConst.GRId_SIZE),a=this.allGridDict;if(0==a.containsKey(r+"_"+n))return null;var s=a[r+"_"+n];return s},i.prototype.getPlayerGrid=function(){var e=this.player.x,t=this.player.y;return this.getCurrentGrid(e,t)},i.prototype.touchHandler=function(){var e=this.getPlayerGrid();if(null!=e){var t=this.getNextMoveDir(e);t==this.player.direction?this.player.jump():this.player.direction=t}},i.prototype.getNextMoveDir=function(t){var i=0,r=t.nextGrid;if(null==r)return this.player.direction;if(r.info.type==e.GridType.EMPTY)return this.player.direction;for(;3>i&&r.info.dir==this.player.direction;){if(i++,r=r.nextGrid,null==r)return this.player.direction;if(r.info.type==e.GridType.EMPTY)return this.player.direction}return r.info.dir},i.prototype.removeOldMap=function(e){var t=this.mapDict[this.DICT_KEY+e];null!=t&&t.forEach(function(e,t,i){utils.DisplayObjectUtil.removeFromParent(e)})},i}(egret.Sprite);e.Map=t,__reflect(t.prototype,"map.Map")}(map||(map={}));var map;!function(e){var t=function(){function e(){}return e.getMapLength=function(e){return 32},e.getBendingRank=function(e){if(1==e){var t=this.MAX-1;return t>5&&(t=5),t}var t=this.MAX-10;return 0>=t&&(t=1),3},e.getSeparateRank=function(e){if(1==e){var t=this.MAX-1;return t}var t=this.MAX-10;return 0>=t&&(t=1),3},e}();t.MAX=10,e.MapConfig=t,__reflect(t.prototype,"map.MapConfig")}(map||(map={}));var map;!function(e){var t=function(){function t(){}return t.createMapData=function(t,i){void 0===i&&(i=null),this.MAX=e.MapConfig.getMapLength(t),this.count=0,null==i?this.prevNode=new e.MapNode:this.prevNode=i,this.list=new Array,null==i&&this.list.push(this.prevNode),this.bendingRank=e.MapConfig.getBendingRank(t),this.separateRank=e.MapConfig.getSeparateRank(t),this.create(t);var r=this.list[0];return r.type=e.GridType.FIRST,this.list},t.create=function(t){var i;if(this.count<1e4||this.count>this.MAX-100)i=this.createNode(player.Direction.TOP);else{var r=[];if(this.prevNode.dir==player.Direction.TOP?r.push(player.Direction.LEFT,player.Direction.RIGHT,player.Direction.TOP):this.prevNode.dir==player.Direction.LEFT?r.push(player.Direction.LEFT,player.Direction.TOP):this.prevNode.dir==player.Direction.RIGHT&&r.push(player.Direction.RIGHT,player.Direction.TOP),this.count%this.bendingRank==0){var n=Math.floor(Math.random()*r.length);i=this.createNode(r[n])}else i=this.createNode(this.prevNode.dir);this.count%this.separateRank==0&&null!=i.prevNode.prevNode&&i.prevNode.dir==i.dir&&i.prevNode.prevNode.dir==i.dir&&i.prevNode.prevNode.type!=e.GridType.EMPTY&&(i.prevNode.type=e.GridType.EMPTY)}i.mapLevel=t,this.prevNode=i,this.list.push(i),this.count++,this.count<this.MAX&&this.create(t)},t.createNode=function(t){var i=new e.MapNode;switch(t){case player.Direction.TOP:i.xIndex=this.prevNode.xIndex,i.yIndex=this.prevNode.yIndex-1,i.dir=player.Direction.TOP;break;case player.Direction.LEFT:i.xIndex=this.prevNode.xIndex-1,i.yIndex=this.prevNode.yIndex,i.dir=player.Direction.LEFT;break;case player.Direction.RIGHT:i.xIndex=this.prevNode.xIndex+1,i.yIndex=this.prevNode.yIndex,i.dir=player.Direction.RIGHT;break;default:i.xIndex=this.prevNode.xIndex,i.yIndex=this.prevNode.yIndex-1,i.dir=player.Direction.TOP}return i.prevNode=this.prevNode,this.prevNode.nextNode=i,i.dir!=this.prevNode.dir&&(this.prevNode.isShowArrow=!0),i},t.getGridByType=function(t){var i;switch(t){case e.GridType.NORMAL:i=new e.BaseGrid;break;case e.GridType.EMPTY:i=new e.EmptyGrid;break;case e.GridType.FIRST:i=new e.FirstGrid;break;default:i=new e.BaseGrid}return i},t}();t.MAX=100,e.MapFactory=t,__reflect(t.prototype,"map.MapFactory")}(map||(map={}));var map;!function(e){var t=function(){function t(){this.xIndex=0,this.yIndex=0,this.dir=player.Direction.TOP,this._isShowArrow=!1,this.mapLevel=0,this.type=e.GridType.NORMAL}return Object.defineProperty(t.prototype,"centerPoint",{get:function(){return new egret.Point(e.GridConst.GRId_SIZE/2,e.GridConst.GRId_SIZE/2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShowArrow",{get:function(){return this._isShowArrow},set:function(e){this._isShowArrow=e},enumerable:!0,configurable:!0}),t}();e.MapNode=t,__reflect(t.prototype,"map.MapNode")}(map||(map={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var map;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.setGridSkin=function(){var t=this.getGridColor();this.graphics.beginFill(t,0),this.graphics.drawRect(0,0,e.GridConst.GRId_SIZE,e.GridConst.GRId_SIZE),this.graphics.endFill()},i.prototype.isOnGrid=function(e){return!1},i}(e.BaseGrid);e.EmptyGrid=t,__reflect(t.prototype,"map.EmptyGrid")}(map||(map={}));var map;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.setGridSkin=function(){var t=this.getGridColor();this.graphics.clear(),this.graphics.beginFill(t),this.graphics.drawCircle(e.GridConst.GRId_SIZE/2,e.GridConst.GRId_SIZE/2,1.5*e.GridConst.GRId_SIZE),this.graphics.endFill()},i}(e.BaseGrid);e.FirstGrid=t,__reflect(t.prototype,"map.FirstGrid")}(map||(map={}));var map;!function(e){var t=function(){function e(){}return e}();t.GRId_SIZE=64,e.GridConst=t,__reflect(t.prototype,"map.GridConst");var i=function(){function e(){}return e}();i.NORMAL=0,i.EMPTY=1,i.HALF=2,i.FIRST=3,e.GridType=i,__reflect(i.prototype,"map.GridType")}(map||(map={}));var player;!function(e){var t;!function(e){e[e.LEFT=0]="LEFT",e[e.TOP=1]="TOP",e[e.RIGHT=2]="RIGHT",e[e.BOTTOM=3]="BOTTOM"}(t=e.Direction||(e.Direction={}))}(player||(player={}));var player;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.SKIN_NAME="player_skin_",i._skinID=0,i._speed=0,i._isJump=!1,i.skinID=0,i.speed=4,i.direction=e.Direction.TOP,i.deadIcon=utils.DisplayObjectUtil.createBitmapByName("dead_icon_png"),i.deadIcon.anchorOffsetX=i.deadIcon.width/2,i.deadIcon.anchorOffsetY=i.deadIcon.height/2,i.deadIcon.x=0,i.deadIcon.y=0,i.cacheAsBitmap=!0,i}return __extends(i,t),Object.defineProperty(i.prototype,"skinID",{get:function(){return this._skinID},set:function(e){this._skinID=e,this._playerImg=utils.DisplayObjectUtil.createBitmapByName(this.SKIN_NAME+this.skinID+"_png"),this.addChild(this._playerImg),this._playerImg.anchorOffsetX=this._playerImg.width/2,this._playerImg.anchorOffsetY=this._playerImg.height/2,this._playerImg.x=0,this._playerImg.y=0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pos",{set:function(e){this.x=e.x,this.y=e.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._dir},set:function(t){this._dir=t,t==e.Direction.LEFT?(this._xPower=-1,this._yPower=0,this._playerImg.rotation=-90):t==e.Direction.TOP?(this._xPower=0,this._yPower=-1,this._playerImg.rotation=0):t==e.Direction.RIGHT?(this._xPower=1,this._yPower=0,this._playerImg.rotation=90):t==e.Direction.BOTTOM&&(this._xPower=0,this._yPower=1,this._playerImg.rotation=180)},enumerable:!0,configurable:!0}),i.prototype.jump=function(){this._isJump=!0;var e=300;egret.Tween.get(this).to({scaleX:1.2,scaleY:1.2},e).to({scaleX:1,scaleY:1},e).call(this.jumpOver,this)},i.prototype.jumpOver=function(){this._isJump=!1},Object.defineProperty(i.prototype,"isUndead",{get:function(){return this._isJump},enumerable:!0,configurable:!0}),i.prototype.move=function(e){this.x+=this._xPower*this.speed,this.y+=this._yPower*this.speed},i.prototype.dead=function(){this.deadIcon.scaleX=0,this.deadIcon.scaleY=0,this.addChild(this.deadIcon),egret.Tween.get(this._playerImg).to({scaleX:0,scaleY:0},200),egret.Tween.get(this.deadIcon).to({scaleX:1,scaleY:1},200)},i.prototype.reset=function(){this.x=0,this.y=0,utils.DisplayObjectUtil.removeFromParent(this.deadIcon),this._playerImg.scaleX=1,this._playerImg.scaleY=1,this.direction=e.Direction.TOP},i}(egret.DisplayObjectContainer);e.Player=t,__reflect(t.prototype,"player.Player")}(player||(player={}));var ui;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.isStart=!1,i.isDead=!1,i.bmpStrings=["num_3_png","num_2_png","num_1_png","go_png"],i.graphics.beginFill(52479),i.graphics.drawRect(0,0,StageManager.stageWidth,StageManager.stageHeight),i.graphics.endFill(),i._map=new map.Map,i.addChild(i._map),i.player=new player.Player,i._map.addPlayer(i.player),Camera.setup(i._map),Camera.follow(i.player),i.timer=new egret.Timer(1e3,5),i.numBmp=new egret.Bitmap,i.touchSprite=new egret.Shape,i.touchSprite.graphics.beginFill(0,.4),i.touchSprite.graphics.drawRect(0,0,StageManager.stageWidth,StageManager.stageHeight),i.touchSprite.graphics.endFill(),i.touchSprite.cacheAsBitmap=!0,i.addChild(i.touchSprite),i.resultPanel=new e.ResultPanel,utils.DisplayObjectUtil.centerObjToStage(i.resultPanel),i.orResultPanelY=i.resultPanel.y,i.addEvent(),i}return __extends(i,t),i.prototype.addEvent=function(){this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.touchSprite.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandler,this),this.resultPanel.addEventListener(events.GameEvent.RESTART_GAME,this.restartGame,this)},i.prototype.touchHandler=function(e){0!=this.isStart&&1!=this.isDead&&this._map.touchHandler()},i.prototype.update=function(e){if(0!=this.isStart&&1!=this.isDead){var t=this._map.getPlayerGrid();if(null!=t&&t.isOnGrid(this.player))this._map.mapLevel=t.info.mapLevel;else if(0==this.player.isUndead)return console.warn("dead!"),void this.end();this.player.move(e)}},i.prototype.start=function(){this.timer.start(),this.isDead=!1},i.prototype.end=function(){this.isStart=!1,this.timer.reset(),this.touchSprite.touchEnabled=!1,this.player.dead(),this.isDead=!0,this.showResultPanel()},i.prototype.onTimer=function(e){utils.DisplayObjectUtil.removeFromParent(this.numBmp);var t=this.timer.currentCount;5==t||(4==t&&(this.hideMask(),this.touchSprite.touchEnabled=!0,this.isStart=!0),this.numBmp=utils.DisplayObjectUtil.createBitmapByName(this.bmpStrings[t-1]),this.numBmp.alpha=0,utils.DisplayObjectUtil.centerObjToStage(this.numBmp),this.numBmp.y=(StageManager.stageHeight-this.numBmp.height)/2+2.5*this.numBmp.height,egret.Tween.get(this.numBmp).to({alpha:1,y:(StageManager.stageHeight-this.numBmp.height)/2+2.5*this.numBmp.height-100},200,egret.Ease.backOut),this.addChild(this.numBmp))},i.prototype.showMask=function(){this.touchSprite.alpha=1},i.prototype.hideMask=function(){this.touchSprite.alpha=0},i.prototype.showResultPanel=function(){var e=this;setTimeout(function(){e.showMask();var t=StageManager.stageHeight;e.resultPanel.y=t,e.addChild(e.resultPanel),egret.Tween.get(e.resultPanel).to({y:e.orResultPanelY},400,egret.Ease.backOut)},600)},i.prototype.hideResultPanel=function(){egret.Tween.get(this.resultPanel).to({y:StageManager.stageHeight},400,egret.Ease.backIn)},i.prototype.restartGame=function(e){this.hideResultPanel(),this._map.reset(),this.player.reset(),this._map.addPlayer(this.player),this.start()},i}(egret.Sprite);e.GameScene=t,__reflect(t.prototype,"ui.GameScene")}(ui||(ui={}));var ui;!function(e){var t=function(e){function t(){var t=e.call(this)||this,i=utils.DisplayObjectUtil.createBitmapByName("main_menu_bg_png");t.addChild(i);var r=new tui.Button(utils.DisplayObjectUtil.createBitmapByName("main_menu_start_btn_png"));return t.addChild(r),r.x=i.width/2,r.y=i.height-450,r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,t.startHandler,t),t}return __extends(t,e),t.prototype.startHandler=function(e){Main.instance.startGame()},t}(egret.Sprite);e.MainMenu=t,__reflect(t.prototype,"ui.MainMenu")}(ui||(ui={}));var ui;!function(e){var t=function(e){function t(){var t=e.call(this)||this;t.bg=utils.DisplayObjectUtil.createBitmapByName("result_panel_bg_png"),t.addChild(t.bg),t.width=t.bg.width,t.height=t.bg.height,t.scoreBg=utils.DisplayObjectUtil.createBitmapByName("result_panel_score_bg_png"),utils.DisplayObjectUtil.centerObj(t.scoreBg,t),t.scoreBg.y=100,t.addChild(t.scoreBg),t.starIcon=utils.DisplayObjectUtil.createBitmapByName("result_panel_gold_icon_png"),t.starIcon.x=t.scoreBg.x+t.scoreBg.width-t.starIcon.width-20,t.starIcon.y=t.scoreBg.y-1,t.addChild(t.starIcon),t.shareIcon=new tui.Button(utils.DisplayObjectUtil.createBitmapByName("share_icon_png")),t.homeIcon=new tui.Button(utils.DisplayObjectUtil.createBitmapByName("home_icon_png")),t.shopIcon=new tui.Button(utils.DisplayObjectUtil.createBitmapByName("shop_icon_png"));for(var i=[t.shareIcon,t.homeIcon,t.shopIcon],r=95,n=t.shareIcon.width+t.homeIcon.width+t.shopIcon.width+190,a=(t.width-n)/2+t.shareIcon.width/2,s=0;s<i.length;s++){var o=i[s];o.x=a+(o.width+r)*s,o.y=t.height-90,t.addChild(o)}return t.restartBtn=new tui.Button(utils.DisplayObjectUtil.createBitmapByName("result_panel_restart_btn_png")),t.restartBtn.x=t.width/2,t.restartBtn.y=t.height/2+30,t.addChild(t.restartBtn),t.cacheAsBitmap=!0,t.addEvent(),t}return __extends(t,e),t.prototype.addEvent=function(){this.restartBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.restartGame,this)},t.prototype.restartGame=function(e){this.dispatchEvent(new events.GameEvent(events.GameEvent.RESTART_GAME))},t}(egret.DisplayObjectContainer);e.ResultPanel=t,__reflect(t.prototype,"ui.ResultPanel")}(ui||(ui={}));var utils;!function(e){var t=function(){function e(){this._keys=new Array,this._values=new Array}return e.prototype.add=function(e,t){this[e]=t,this._keys.push(e),this._values.push(t)},e.prototype.remove=function(e){var t=this._keys.indexOf(e,0);this._keys.splice(t,1),this._values.splice(t,1),delete this[e]},e.prototype.keys=function(){return this._keys},e.prototype.values=function(){return this._values},e.prototype.containsKey=function(e){return"undefined"==typeof this[e]?!1:!0},e}();e.Dictionary=t,__reflect(t.prototype,"utils.Dictionary")}(utils||(utils={}));var utils;!function(e){var t=function(){function e(){}return e.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},e.removeFromParent=function(e){null!=e&&null!=e.parent&&e.parent.removeChild(e)},e.centerObjToStage=function(e){null!=e&&(e.x=(StageManager.stageWidth-e.width)/2,e.y=(StageManager.stageHeight-e.height)/2)},e.centerObj=function(e,t){null!=e&&null!=t&&(e.x=(t.width-e.width)/2,e.y=(t.height-e.height)/2)},e}();e.DisplayObjectUtil=t,__reflect(t.prototype,"utils.DisplayObjectUtil")}(utils||(utils={}));